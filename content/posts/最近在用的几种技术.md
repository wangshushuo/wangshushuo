---
title: 最近在用的几种技术
date: 2023-11-29T23:17:14+08:00
categories:
  - 分类
---

## htm+preact的无构建开发

```html
<script src="https://unpkg.com/htm/preact/standalone.umd.js"></script>
<script>
  class App extends Component {
    constructor(props) {
      super(props);
      this.state = { values: {} };
    }

    /**
     * set value to state
     * @param e InputEvent
     * @param fieldName string
     */
    input(e, fieldName) {
      const newValue = {
        [fieldName]: e.target.value,
      };
      this.setState(_.merge({}, this.state, { values: newValue }));
    }

    save() {
      fetch("https://www.baidu.com").then();
    }

    render(props, state) {
      return html` <div class="app container">
        <h3 class="mb-4">快速创建组件</h3>
        <div class="row">
          <div class="col-4">
            ${Object.keys(fields).map(
              (session, index) => html`
                ${sectionTitle[session] &&
                html`<h5>${sectionTitle[session]}</h5>`}
                <div class="row">
                  ${fields[session].map(
                    (field) => html`
                      <div class="input-group input-group-sm mb-3 col-3">
                        <span class="input-group-text" id="inputGroup-sizing-sm"
                          >${field.label}</span
                        >
                        ${field.session === "input" &&
                        html`
                          <input
                            type="text"
                            class="form-control"
                            aria-label="Sizing example input"
                            aria-describedby="inputGroup-sizing-sm"
                            value=${this.state.values[field.name]}
                            onInput=${(e) => this.input(e, field.name)}
                          />
                        `} ${field.session === "select" &&
                        html`
                          <select
                            class="form-select"
                            aria-label="Default select example"
                          >
                            ${optionMap[field.name] &&
                            optionMap[field.name].map((option) => {
                              if (_.isString(option)) {
                                return html`
                                  <option value=${option}>${option}</option>
                                `;
                              } else {
                                return html`
                                  <option value=${option.value}>
                                    ${option.label}
                                  </option>
                                `;
                              }
                            })}
                          </select>
                        `} ${field.session === "multiSelect" &&
                        html`
                          <div class="d-flex ms-1">
                            ${optionMap[field.name] &&
                            optionMap[field.name].map(
                              (option) => html`
                                <div class="form-check ms-2">
                                  <input
                                    class="form-check-input"
                                    type="checkbox"
                                    value=${option}
                                    id="flexCheckDefault-${option}"
                                  />
                                  <label
                                    class="form-check-label"
                                    for="flexCheckDefault"
                                  >
                                    ${option}
                                  </label>
                                </div>
                              `
                            )}
                          </div>
                        `} ${field.session === "boolean" &&
                        html`
                          <select
                            class="form-select"
                            aria-label="Default select example"
                          >
                            <option value="f" selected>否</option>
                            <option value="t">是</option>
                          </select>
                        `} ${field.session === "container" &&
                        html`
                          <input
                            type="number"
                            class="form-control"
                            aria-label="Sizing example input"
                            aria-describedby="inputGroup-sizing-sm"
                            value=${this.state.values[field.name] || 0}
                            onInput=${(e) => this.input(e, field.name)}
                          />
                        `}
                      </div>
                    `
                  )}
                </div>
              `
            )}
            <button onClick=${this.save}>save</button>
          </div>
          <div class="col-4">${props.children[0]}</div>
          <div class="col-4">${props.children[1]}</div>
        </div>
      </div>`;
    }
  }
  class DataSource extends Component {
    constructor(props) {
      super(props);
      this.state = { values: {} };
    }

    render(props, state) {
      return html`
        <div class="row">
          ${props.tables.map((table) => {
            return html`
              <h3>${table.name}</h3>
              ${table.fields.map((field) => {
                return html` <div class="input-group input-group-sm mb-3 col-2">
                  <span class="input-group-text" id="inputGroup-sizing-sm"
                    >${field}</span
                  >
                  <input
                    type="text"
                    class="form-control"
                    aria-label="Sizing example input"
                    aria-describedby="inputGroup-sizing-sm"
                    value=${this.state.values[field]}
                    onInput=${(e) => this.input(e, field)}
                  />
                </div>`;
              })}
            `;
          })}
        </div>
      `;
    }
  }
  render(
    html`
        <${App} page="All">
            <${DataSource} tables=${[tables.dataSource, tables.dimension]} />
            <${DataSource} tables=${[tables.indicator]} />
        </${App}>
    `,
    document.body
  );
</script>
```

## sveltejs服务端渲染

### cloudfare的kv和pages

## Go模板