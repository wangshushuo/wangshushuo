# React的Diff算法

## 核心概念

- **Diff算法**
  - React用于比较两棵虚拟DOM树的差异，并计算出最小的更新操作以达到高效更新DOM的算法。

## Diff算法的特点

- **高效**
  - 尽量减少不必要的DOM操作，提高应用性能。
- **局部更新**
  - 只更新变化的部分，而不是重新渲染整个DOM树。

## Diff算法的策略

- **树的比较**
  - React认为跨层级的DOM操作较少，因此只在同一层级进行Diff比较。
- **组件的比较**
  - 当组件类型相同，React会假设内部结构保持不变，只比较并更新组件的props和state。
  - 当组件类型不同，React会销毁旧组件，创建并挂载新组件。
- **列表的比较**
  - 列表中元素的增加、删除、移动等操作，通过唯一的key值来优化比较过程。

## Diff算法的实现

- **同层比较**
  - 逐层对比虚拟DOM节点，减少比较的复杂度。
- **key的作用**
  - 通过为列表中的每个元素分配一个唯一的key，可以更快地识别和比较列表中的元素。
- **类型判断**
  - 根据节点类型（如HTML标签、组件）进行不同的比较逻辑处理。